<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />

    <title>TodoList by JS + Bootstrap5</title>
  </head>
  <body style="max-width: 700px; margin: 0 auto;">
    <div class="container-md mt-3">
      <div class="display-3">Todo L ist</div>
      <div class="input-group my-4">
        <input
          id="newjob"
          type="text"
          class="form-control"
          placeholder="Input New Job"
          aria-label="Input new Task with Add button"
        />
        <button
          class="btn btn-outline-secondary"
          type="button"
          onclick="addJob()"
        >
          Add
        </button>
      </div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
    <script>
      function addJob() {
        let newjob = document.querySelector("#newjob").value;
        // document.querySelector("#job1").value = newjob;
        let target = document.body.firstElementChild;
        let jobHTML = `
        <div class="input-group my-2">
        <input
          type="text"
          class="form-control"
          aria-label="Each task with two button"
          onclick="doneJob(this)"
          value="${newjob}"2
          readonly
        />
        <button class="btn btn-outline-secondary" type="button" onclick="editJob(this)">Edit</button>
        <button class="btn btn-outline-secondary" type="button" onclick="deleteJob(this)">Delete</button>
      </div>
        `;
        target.innerHTML += jobHTML;
        // target.append(jobHTML);
        document.querySelector("#newjob").select();
      }

      function editJob(ele) {
        // console.log(ele.previousElementSibling);
        let editBox = ele.previousElementSibling;
        if (editBox.readOnly) {
          ele.innerHTML = "OK";
          ele.classList.toggle("bg-info");
          editBox.readOnly = false;
          editBox.select();
          editBox.setSelectionRange(0, editBox.value.length); //for Mobile Safari (ios)
        } else {
          ele.innerHTML = "Edit";
          ele.classList.toggle("bg-info");
          editBox.readOnly = true;
        }
      }

      function doneJob(ele) {
        if (ele.nextElementSibling.innerHTML === "OK") return;
        ele.classList.toggle("text-muted");
        ele.classList.toggle("text-decoration-line-through");
      }

      function deleteJob(ele) {
        ele.parentElement.remove();
      }
    </script>
  </body>
</html>
