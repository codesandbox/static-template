<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Static Template</title>
    <script>
      let flag = 0;
      let winorlose = 0;

      function onload() {
        document.getElementById("turn").innerText = "Player 1's Turn";
      }

      function convertIndexToId(i, j) {
        return 3 * i + (j + 1);
      }

      function convertIdToIndex(id) {
        const numericId = Number(id);
        // 1 -> 0, 0
        // 3 -> 0, 2
        // 4 -> 1, 0
        // 9 -> 2, 2
        return [Math.ceil(numericId / 3) - 1, (numericId - 1) % 3];
      }

      function initialize() {
        for (let i = 0; i < 3; i++) {
          for (let j = 0; j < 3; j++) {
            const gridItemId = convertIndexToId(i, j);
            document.getElementById(gridItemId).innerText = "";
          }
        }

        flag = 0;
        winorlose = 0;
        const turn = document.getElementById("turn");
        turn.innerText = "Player 1's Turn";
      }
      function divClicked(that) {
        const ele = document.getElementById(that.id);
        const turn = document.getElementById("turn");

        if (ele.innerText === "" && flag === 0) {
          ele.innerText = "X";
          flag = 1;
          turn.innerText = "Player 2's Turn";
        }
        if (ele.innerText === "" && flag === 1) {
          ele.innerText = "O";
          flag = 0;
          turn.innerText = "Player 1's Turn";
        }

        let arr = [[], [], []];

        for (let i = 0; i < 3; i++) {
          for (let j = 0; j < 3; j++) {
            const gridItemId = convertIndexToId(i, j);
            arr[i][j] = document.getElementById(gridItemId).innerText;
          }
        }

        if (
          winorlose === 0 &&
          ((arr[0][0] === "X" && arr[0][1] === "X" && arr[0][2] === "X") ||
            (arr[0][0] === "X" && arr[1][1] === "X" && arr[2][2] === "X") ||
            (arr[0][0] === "X" && arr[1][0] === "X" && arr[2][0] === "X") ||
            (arr[1][0] === "X" && arr[1][1] === "X" && arr[1][2] === "X") ||
            (arr[2][0] === "X" && arr[1][1] === "X" && arr[0][2] === "X") ||
            (arr[2][0] === "X" && arr[2][1] === "X" && arr[2][2] === "X") ||
            (arr[0][1] === "X" && arr[1][1] === "X" && arr[2][1] === "X") ||
            (arr[0][2] === "X" && arr[1][2] === "X" && arr[2][2] === "X"))
        ) {
          winorlose = 1;
          alert("Congratulations! Player1 wins");
          initialize();
        } else if (
          winorlose === 0 &&
          ((arr[0][0] === "O" && arr[0][1] === "O" && arr[0][2] === "O") ||
            (arr[0][0] === "O" && arr[1][1] === "O" && arr[2][2] === "O") ||
            (arr[0][0] === "O" && arr[1][0] === "O" && arr[2][0] === "O") ||
            (arr[1][0] === "O" && arr[1][1] === "O" && arr[1][2] === "O") ||
            (arr[2][0] === "O" && arr[1][1] === "O" && arr[0][2] === "O") ||
            (arr[2][0] === "O" && arr[2][1] === "O" && arr[2][2] === "O") ||
            (arr[0][1] === "O" && arr[1][1] === "O" && arr[2][1] === "O") ||
            (arr[0][2] === "O" && arr[1][2] === "O" && arr[2][2] === "O"))
        ) {
          winorlose = 1;
          alert("Congratulations! Player2 wins");
          initialize();
        } else if (
          winorlose === 0 &&
          (arr[0][0] === "X" || arr[0][0] === "O") &&
          (arr[0][1] === "X" || arr[0][1] === "O") &&
          (arr[0][2] === "X" || arr[0][2] === "O") &&
          (arr[1][0] === "X" || arr[1][0] === "O") &&
          (arr[1][1] === "X" || arr[1][1] === "O") &&
          (arr[1][2] === "X" || arr[1][2] === "O") &&
          (arr[2][0] === "X" || arr[2][0] === "O") &&
          (arr[2][1] === "X" || arr[2][1] === "O") &&
          (arr[2][2] === "X" || arr[2][2] === "O")
        ) {
          alert("Draw!");
          initialize();
        }
      }
    </script>
    <style>
      body {
        background-color: lemonchiffon;
      }

      h3 {
        width: 100%;
        text-align: center;
        font-size: 22px;
        font-family: Verdana, Geneva, Tahoma, sans-serif;
      }

      p {
        width: 100%;
        text-align: center;
        font-size: 22px;
        font-style: italic;
        font-family: Cambria, Cochin, Georgia, Times, "Times New Roman", serif;
      }

      .container {
        width: 70%;
        margin: auto;
      }

      .row {
        display: flex;
        justify-content: center;
      }

      .col {
        height: 50px;
        width: 50px;
        color: black;
        font-size: 40px;
        text-align: center;
        border: 2px solid olive;
        margin: 2px;
      }
    </style>
  </head>
  <body onload="onload()">
    <h3>Tic Tac Toe</h3>
    <div class="container">
      <div class="row">
        <div
          id="1"
          class="col"
          onclick="divClicked(this)"
          style="background-color: olive;"
        ></div>
        <div
          id="2"
          class="col"
          onclick="divClicked(this)"
          style="background-color: white;"
        ></div>
        <div
          id="3"
          class="col"
          onclick="divClicked(this)"
          style="background-color: olive;"
        ></div>
      </div>
      <div class="row">
        <div
          id="4"
          class="col"
          onclick="divClicked(this)"
          style="background-color: white;"
        ></div>
        <div
          id="5"
          class="col"
          onclick="divClicked(this)"
          style="background-color: olive;"
        ></div>
        <div
          id="6"
          class="col"
          onclick="divClicked(this)"
          style="background-color: white;"
        ></div>
      </div>
      <div class="row">
        <div
          id="7"
          class="col"
          onclick="divClicked(this)"
          style="background-color: olive;"
        ></div>
        <div
          id="8"
          class="col"
          onclick="divClicked(this)"
          style="background-color: white;"
        ></div>
        <div
          id="9"
          class="col"
          onclick="divClicked(this)"
          style="background-color: olive;"
        ></div>
      </div>
    </div>
    <p id="turn"></p>
  </body>
</html>
